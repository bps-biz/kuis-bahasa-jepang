<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Petualangan di Jepang</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Container for all pages -->
    <div id="app-container">

        <!-- Main Menu Page -->
        <div id="main-menu" class="page active">
            <div class="page-content">
                <h1 id="main-title" class="fade-in">Petualangan di Jepang</h1>
                <p id="main-subtitle" class="fade-in">Dapatkah kamu bertahan hidup?</p>
                
                <div class="user-profile-container">
                    <p>Petualang:</p>
                    <div id="user-display-mode">
                        <span id="current-username-display"></span>
                        <button id="change-user-btn" class="small-btn">Ganti</button>
                    </div>
                    <div id="user-edit-mode" style="display: none;">
                         <select id="user-select"></select>
                         <input type="text" id="new-username-input" placeholder="Nama Petualang Baru...">
                         <button id="save-user-btn" class="small-btn">Simpan</button>
                    </div>
                </div>
                
                <div class="button-container">
                    <button id="start-btn" class="main-menu-btn">Mulai</button>
                    <button id="adventure-log-btn" class="main-menu-btn">Jejak Petualangan</button>
                    <!-- NEW: Buku Panduan Button -->
                    <button id="guidebook-btn" class="main-menu-btn">Buku Panduan</button>
                    <button id="settings-btn" class="main-menu-btn">Settings</button>
                </div>
            </div>
        </div>

        <!-- Level Selection Page -->
        <div id="level-page" class="page">
            <div class="page-content">
                <h2>Pilih Tingkat Kesulitan</h2>
                <select id="difficulty-select">
                    <option value="level1">Level 1: Turis Pemula</option>
                    <option value="level2">Level 2: Petualang Mahir</option>
                    <option value="level3">Level 3: Master Jepang</option>
                </select>
                <h2>Pilih Kategori</h2>
                <div class="category-container">
                    <button class="category-btn" data-category="Restoran">
                        <img src="assets/Restaurant1.jpg" alt="Restoran">
                        <span>Restoran</span>
                        <!-- NEW: Lock Icon -->
                        <div class="lock-icon">&#x1F512;</div>
                    </button>
                    <button class="category-btn" data-category="Minimarket">
                        <img src="assets/Minimart1.jpg" alt="Minimarket">
                        <span>Minimarket</span>
                        <div class="lock-icon">&#x1F512;</div>
                    </button>
                    <button class="category-btn" data-category="Kereta">
                        <img src="assets/Train1.jpg" alt="Kereta">
                        <span>Kereta</span>
                        <div class="lock-icon">&#x1F512;</div>
                    </button>
                    <button class="category-btn" data-category="Rumah Sakit">
                        <img src="assets/Hospital1.jpg" alt="Rumah Sakit">
                        <span>Rumah Sakit</span>
                        <div class="lock-icon">&#x1F512;</div>
                    </button>
                </div>
                <button id="back-to-home-from-level" class="back-btn">Kembali ke Home</button>
            </div>
        </div>

        <!-- Quiz Page -->
        <div id="quiz-page" class="page">
             <button id="exit-quiz-btn" class="exit-btn">&times;</button>
             <div id="score-popup-container"></div>
            <div class="page-content">
                <h2 id="quiz-title"></h2>
                <div id="quiz-content">
                    <p id="current-score-display">Skor: 0</p>
                    <img id="quiz-image" src="" alt="Quiz Image">
                    <p id="question-text"></p>
                    <div id="answer-buttons"></div>
                </div>
                 <div class="ad-placeholder-bottom">Ads Placeholder</div>
                 <div id="timer-container">
                    <span>‚è≥</span>
                    <div class="timer-bar-outer">
                        <div id="timer-bar-inner"></div>
                    </div>
                 </div>
                 <div class="progress-container">
                    <div id="progress-bar"></div>
                </div>
            </div>
        </div>

        <!-- Result Page -->
        <div id="hasil-page" class="page">
            <div class="page-content">
                <h2>Laporan Petualangan</h2>
                <img id="result-image" src="" alt="Result Image">
                <p id="score-text"></p>
                <h3 id="result-text"></h3>
                <p id="result-subtext"></p>
                 <div class="ad-placeholder-center">Ads Placeholder</div>
                <div class="button-container">
                    <button id="home-btn" class="result-page-btn">Home</button>
                    <button id="share-btn" class="result-page-btn">Share</button>
                    <button id="retry-btn" class="result-page-btn">Coba Lagi</button>
                </div>
            </div>
        </div>

        <!-- Adventure Log Page -->
        <div id="jejak-petualangan-page" class="page">
            <div class="page-content adventure-log-content">
                <h2>Jejak Petualangan</h2>
                <div class="tabs">
                    <button class="tab-btn active" data-tab="stats">Statistik</button>
                    <button class="tab-btn" data-tab="leaderboard">Papan Skor</button>
                </div>
                <div id="stats" class="tab-content active">
                    <div id="pangkat-info">
                        <img id="pangkat-image" src="assets/pangkat1.jpg" alt="Pangkat">
                        <p id="pangkat-text">Pangkat 1</p>
                    </div>
                    <div class="stats-container">
                        <p>Total Petualangan: <span id="total-attempts">0</span></p>
                        <p>Rata-rata Skor: <span id="average-score">0</span></p>
                    </div>
                    <div class="chart-container">
                        <canvas id="adventure-chart"></canvas>
                    </div>
                </div>
                <div id="leaderboard" class="tab-content">
                    <h3>Skor Tertinggi</h3>
                    <div class="leaderboard-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Nama</th>
                                    <th>Skor</th>
                                    <th>Kategori</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body"></tbody>
                        </table>
                    </div>
                </div>
                <button id="back-to-home-from-log" class="back-btn">Kembali ke Home</button>
            </div>
        </div>
    </div>

    <!-- Settings Overlay -->
    <div id="settings-overlay" class="overlay">
        <div class="overlay-content">
            <h2>Settings</h2>
            <button id="sound-toggle-btn">Sounds: ON</button>
            <button id="reset-adventure-btn">Reset Petualangan (Petualang Saat Ini)</button>
            <button id="close-settings-btn">Kembali</button>
        </div>
    </div>
    
    <!-- Confirmation Dialog Overlay -->
    <div id="confirmation-overlay" class="overlay">
        <div class="overlay-content">
            <p>Yakin ingin mereset petualangan untuk <strong id="confirm-reset-username"></strong>? Semua progres dan level akan hilang!</p>
            <button id="confirm-reset-btn">Ya</button>
            <button id="cancel-reset-btn">Tidak</button>
        </div>
    </div>

    <!-- Feedback Overlay for Quiz -->
    <div id="feedback-overlay" class="overlay">
        <div class="overlay-content">
            <h2 id="feedback-title"></h2>
            <p id="feedback-text"></p>
            <button id="next-question-btn">Berikutnya</button>
        </div>
    </div>

    <!-- NEW: Guidebook Overlay -->
    <div id="guidebook-overlay" class="overlay">
        <div class="overlay-content guidebook-content">
            <h2>Buku Panduan Petualang</h2>
            <div class="tabs">
                <button class="tab-btn active" data-tab="how-to-play">Cara Bermain</button>
                <button class="tab-btn" data-tab="about-us">Tentang Kami</button>
            </div>
            <div id="how-to-play" class="tab-content active">
                <h4>Cara Naik Level:</h4>
                <p>Untuk membuka level berikutnya (misal, dari Level 1 ke Level 2) di sebuah kategori, kamu harus menjadi master di level sebelumnya. Caranya? Dapatkan <strong>skor sempurna 10/10</strong> di kategori tersebut! Kuasai restoran level 1 untuk membuka restoran level 2, dan seterusnya!</p>
                
                <h4>Cara Jadi Juara Skor:</h4>
                <p>Setiap jawaban benar memberimu <strong>+100 poin</strong>. Tapi, petualang sejati tahu cara mengumpulkan bonus!</p>
                <ul>
                    <li><strong>Bonus Waktu ‚è≥:</strong> Jawab secepat kilat! Sisa waktu di bar akan diubah menjadi poin bonus. Makin cepat, makin besar bonusnya!</li>
                    <li><strong>Bonus Combo üî•:</strong> Jawab benar berturut-turut untuk mendapatkan bonus combo yang makin besar. Kalau bisa 10x berturut-turut, kamu akan dapat bonus <strong>SEMPURNA +50!</strong></li>
                </ul>

                <h4>Petualangan Baru Menanti:</h4>
                <p>Dunia Jepang sangat luas! Kami akan terus menambahkan kategori dan pertanyaan baru secara berkala. Jadi, teruslah berlatih, petualang!</p>
            </div>
            <div id="about-us" class="tab-content">
                <h4>Halo, Petualang!</h4>
                <p>Terima kasih sudah bermain! Game ini dibuat oleh [Nama Anda/Nama Studio Anda] dengan harapan bisa membuat belajar bahasa Jepang jadi lebih seru dan praktis, terutama buat kamu yang mau jalan-jalan ke Jepang.</p>
                <p>Kami percaya, sedikit demi sedikit menguasai percakapan sehari-hari bisa membuat perbedaan besar dalam petualanganmu.</p>
                
                <h4>Punya Ide atau Masukan?</h4>
                <p>Kami senang sekali mendengar darimu! Apakah ada kategori yang kamu inginkan? Atau menemukan soal yang aneh? Kirimkan masukanmu ke:</p>
                <p><strong>kontak@emailanda.com</strong></p>
                <p>Selamat bertualang!</p>
            </div>
            <button id="close-guidebook-btn">Mengerti!</button>
        </div>
    </div>


    <!-- Audio files -->
    <audio id="click-sound" src="assets/sounds/click.mp3"></audio>
    <audio id="correct-sound" src="assets/sounds/correct.mp3"></audio>
    <audio id="wrong-sound" src="assets/sounds/wrong.mp3"></audio>

    <script src="app.js"></script>
</body>
</html>

